<?xml version='1.0' encoding='utf-8' ?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "Developers_Guide.ent">
%BOOK_ENTITIES;
]>
<sect1 id="dev.eventref.notify">
	<title>Notification Events</title>

	<sect2 id="dev.eventref.notify.user">
		<title>Recipient Selection</title>

		<blockquote id="dev.eventref.notify.user.include">
			<title>EVENT_NOTIFY_USER_INCLUDE (Default)</title>

			<blockquote>
				<para>
					This event allows a plugin to specify a set of users to be included as
					recipients for a notification.  The set of users returned is added to the
					list of recipients already generated from the existing notification flags
					and selection process.
				</para>

				<itemizedlist>
					<title>Parameters</title>
					<listitem><para>&lt;Integer&gt;: Bug ID</para></listitem>
					<listitem><para>&lt;String&gt;: Notification type</para></listitem>
				</itemizedlist>

				<itemizedlist>
					<title>Return Value</title>
					<listitem><para>&lt;Array&gt;: User IDs to include as recipients</para></listitem>
				</itemizedlist>
			</blockquote>
		</blockquote>

		<blockquote id="dev.eventref.notify.user.exclude">
			<title>EVENT_NOTIFY_USER_EXCLUDE (Default)</title>

			<blockquote>
				<para>
					This event allows a plugin to selectively exclude individual users from
					the recipient list for a notification.  The event is signalled for every
					user in the final recipient list, including recipients added by the
					event NOTIFY_USER_INCLUDE as described above.
				</para>

				<itemizedlist>
					<title>Parameters</title>
					<listitem><para>&lt;Integer&gt;: Bug ID</para></listitem>
					<listitem><para>&lt;String&gt;: Notification type</para></listitem>
					<listitem><para>&lt;Integer&gt;: User ID</para></listitem>
				</itemizedlist>

				<itemizedlist>
					<title>Return Value</title>
					<listitem><para>&lt;Boolean&gt;: True to exclude the user, false otherwise</para></listitem>
				</itemizedlist>
			</blockquote>
		</blockquote>

	</sect2>

	<sect2 id="dev.eventref.notify.email">
		<title>Email notification </title>

		<blockquote id="dev.eventref.notify.email">
			<title>EVENT_NOTIFY_EMAIL (Chained)</title>

			<blockquote>
				<para>
					This event allows a plugin to modify an email notification message before it is sent.
				</para>

				<itemizedlist>
					<title>Parameters</title>
					<listitem><para>&lt;Complex&gt;: email message to be sent, EmailData object (see core\email_queue_api.php)</para></listitem>
					<listitem><para>&lt;String&gt;: message type identificator</para></listitem>
					<listitem><para>&lt;Array&gt;: message parameters</para></listitem>

				</itemizedlist>

				<itemizedlist>
					<title>Return Value</title>
					<listitem><para>&lt;Complex&gt;: email message to be sent, EmailData object</para></listitem>
				</itemizedlist>
			</blockquote>
		</blockquote>
	</sect2>

</sect1>
